{% extends 'base.html' %}
{% block content %}
<div id="app">
  <div class="mt-8 md:mt-10 flex justify-between items-center">
    <h1 class="text-4xl">Venta de Tickets ğŸ§¾</h1>
  </div>
  <div>
    <select id="routes" name="routes" v-model="route">
      <option value="">Select</option>
      <option v-for="route in routes" v-bind:value="route.pk">${route.name}</option>
    </select>
  </div>
</div>

</div>
{% endblock %}

{% block inline_javascript %}
<script>
  var app = new Vue({
    el: "#app",
    delimiters: ['${', '}'],
    data: {
      route: '',
      routes: []
    },
    methods: {
      getModuleData: async function (url) {
        try {
          return await axios.get(url);
        } catch (e) {
          console.log(e)
        }
      },
      helperSendModuleInfo: function (method, url, payload) {
        // + This function is to make all the POST or PUT requests
        const config = {
          method: method,
          url: url,
          headers: {
            'X-CSRFToken': getCookie('csrftoken')
          },
          data: payload,
          validateStatus: function (status) {
            return status >= 200 && status <= 201 || status === 204;
          },
        }
        return axios(config);
      },
      getRoutes: async function () {
        let url = '/api/v1/route/';
        let response = await this.getModuleData(url);
        console.log(response);
        this.routes = response.data.results;
      },
      getBuser: function () {},
      getDriver: function () {},
    },
    created() {
      this.getRoutes()
    }
  });

</script>
{% endblock %}
